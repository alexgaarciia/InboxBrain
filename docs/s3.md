# Amazon S3 in InboxBrain
## 1. What is Amazon S3 and how is it used in this project?
Amazon S3 (Simple Storage Service) is a cloud-based storage service that allows you to store and retrieve any amount of data at any time.
S3 organizes data in buckets, which are globally unique containers—think of them as folders—that can store any type of file (called “objects”).

In this project, Amazon S3 is used to store a complete copy of every incoming email (in `.eml` format) received by your WorkMail address. This allows Lambda to later process the full contents and attachments of each message.

## 2. Creating the S3 bucket
To store incoming emails, you’ll first need to create a dedicated S3 bucket.

Steps:
1. Go to the Amazon S3 service in the AWS Console.
2. Click “Create bucket.”
3. Choose a unique bucket name, such as inboxbrain-mails.
3. Leave other settings at their defaults for now (you can further configure security and versioning as needed).
5. Click “Create bucket” to finish.

## 3. Granting SES permission to write to the bucket
For Amazon SES to store incoming emails in your bucket, you need to configure a bucket policy that allows SES to write objects. To add the policy:
1. In the AWS Console, go to your bucket.
2. Click on the “Permissions” tab.
3. Scroll down to “Bucket policy” and click Edit.
4. Paste the policy below:
```
{
    "Version": "2012-10-17",
    "Statement": [
        {
            "Sid": "AllowSESPutObject",
            "Effect": "Allow",
            "Principal": {
                "Service": "ses.amazonaws.com"
            },
            "Action": "s3:PutObject",
            "Resource": "arn:aws:s3:::<your-bucket-name>/*",
            "Condition": {
                "StringEquals": {
                    "aws:Referer": "<your-AWS-account-ID>"
                }
            }
        }
    ]
}
```

5. Save changes.

## 4. Next Step: Configure Amazon SES
After your S3 bucket is set up and permissions are configured, continue with the [Amazon SES setup](https://github.com/alexgaarciia/InboxBrain/blob/main/docs/ses.md) to deliver incoming emails to this bucket.
